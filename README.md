# 网易前端微专业——网易教育产品部首页实现
## 展示页面
[网易教育产品部介绍展示页面](http://115.159.97.188/NetEaseEducationProduct/index.html)
[github地址](https://github.com/vivijind/NetEaseEducationProduct)
[借鉴规范——网易NEC框架规范](http://nec.netease.com/)

## 整体设计及文件说明
### 整体框架MVC架构设计
整体框架借鉴自[todomvc中原生js实现](https://github.com/tastejs/todomvc/tree/master/examples/vanillajs)思想，实现了页面视图、数据和逻辑的简单分离。实现过程中，将整个页面设计为view、model、controller三个主要层次，并通过实现一些常用组件来搭建整个页面。
其中：
* view层主要为网易教育产品部首页的静态页面实现，主要接口为bind和render，用于绑定页面交互逻辑和绘制。
* model层主要为模型对象，处理页面中的数据存储和逻辑，并增加了store层，用于和后台服务器接口进行数据获取，并提供常用的一些ajax接口和cookie存储接口。
* controller层主要连接view层和model层，通过从model层读取数据，然后将数据提供给view层进行绘制，同时从view层获取数据，控制用户输入，然后向模型发送数据。同时，在本页面中，controller层还负责组件的初始化，将形成的组件提供给view层进行绘制，并将组件中获取到的数据传递给model层。

### 文件说明
CSS部分：style.css，包含reset,function的css内容，页面所有的样式及组件的css内容。（文件前面为reset和基本的function样式，然后是页面布局，然后是主体静态页面的样式，最后包含所有的组件样式）

HTML部分：index.html，主页面

JS部分：包含八个文件
* app.js：页面框架
* controller.js：控制层
* md5.js：md5验证
* model.js：数据模型
* store.js：数据通信及cookie操作
* template.js：页面模板
* util.js：工具库
* view.js：视图层

modules部分：实现页面需要的基本组件
* cursor 指示器/翻页器
* form 表单工厂（目前仅测试了input的逻辑处理）
* modal 弹窗
* slider 轮播
    - 在首页轮播图基础上，派生了热门课程的滚动轮播
    - （还需要对代码进行完善）
* video 视频
    - （使用html5，目前仅支持原生控件，还需要实现自定义控件处理）

## 基本功能点实现及说明
###1.关闭顶部通知条
>点击顶部通知条中的“X 不再提醒”后，刷新页面不再出现此通知条（使用本地cookie实现）

点击后隐藏通知条并设置cookie，页面加载时读取cookie判断是否显示通知条。cookie失效时间设置为默认，即关闭浏览器清除cookie。
controller层调用modal层，判断cookie是否存在，根据结果决定是否调用view层的render。

###2.关注“网易教育产品部”登录
>点击关注按钮：首先判断登录的cookie是否已设置（loginSuc），如果未设置登录cookie，则弹出登录框，使用给定的用户名和密码（需要表单验证）调用服务器Ajax登录，成功后设置登录cookie；登录成功后，调用关注API，并设置关注成功的cookie（followSuc）；登录后“关注”按钮变成不可点的“已关注”状态

点击关注，调用model层判断登录cookie是否设置，没有则新建一个弹窗组件并创建一个表单，将表单设置为modal的content内容，然后传递给view层进行render，实现弹出登录框。
其中登录框的表单验证在form.js中判断实现，然后将结果提交给model层，model层调用store层的API，调用服务器Ajax来登录。登录成功后，调用model层的关注，即调用关注API，并设置关注成功的cookie。关注成功后，view层响应render，将关注变为已关注。
用户名：studyOnline
密码：study.163.com
（此处cookie的有效期均为默认，即关闭浏览器后不存在）

###3.顶部右侧导航及内容区各产品的“了解更多”
>点击导航中的“网易公开课”，“网易云课堂”，“中国大学MOOC”，新窗口打开对目的页面

在静态页面中实现，构建a标签。

###4.轮播图
>三张轮播图轮播效果：实现每5s切换图片，图片循环播放；鼠标悬停某张图片，则暂停切换；切换效果使用入场图片500ms淡入的方式。点击后新开窗口打开目的页面

new一个轮播组件，传入图片及对应的link地址，并开启自动轮播，注册相应的事件来响应指示器变化。
new一个指示器组件，并注册相应的事件来响应轮播切换。

###5.左侧内容区tab切换
>点击“产品设计”或“编程语言”tab，实现下方课程内容的更换。tab项的hover及选中效果见视觉稿，tab项对应的课程卡片数据见本文档的数据接口列表

点击tab后获取view层的数据，传递给model层，并把model层更新的数据传递给view层更新课程列表。
根据model层数据来构建指示器，当点击分页器时，切换至相应的页数，并更新课程数据。

###6.查看课程详情
>鼠标悬停“产品设计”或“编程语言”tab下的任意课程卡片，出现浮层显示该课程的课程详情；鼠标离开课程详情浮层，则浮层关闭。课程卡片即详情浮层的效果见视觉稿，课程卡片及详情数据见本文档的数据接口列表

本来通过js完成，发现js的实现，由于效率问题，存在鼠标移动过快，浮层没有及时关闭的现象。故采用CSS实现，CSS实现效率优于JS。

###7.右侧“机构介绍”中的视频介绍
>点击“机构介绍”中的整块图片区域，调用浮层播放介绍视频。图片的hover效果见视觉稿，浮层中调用的播放器（不做浏览器兼容,可用html5）及视频内容接口见本文档的数据接口列表

新建一个video组件，并将该组件赋给新的modal组件的content，实现点击缩略图弹出视频播放窗口；点击关闭暂停视频播放并关闭视频播放窗口。
其中视频逻辑在video组件中实现。

###8.右侧“热门推荐”
>实现每次进入或刷新本页面，“热门推荐”模块中，接口返回20门课程数据，默认展示前10门课程，隔5秒更新一门课程，实现滚动更新热门课程的效果。课程数据接口见本文档的数据接口列表

从轮播组件派生得到新的轮播来实现热门课程滚动。
ie8的动画做兼容处理

###9.页面布局动态适应
>根据浏览器窗口宽度，适应两种视觉布局尺寸。窗口宽度小于1205时，使用小屏视觉布局；窗口宽度大于等于1205时，使用大屏视觉布局。布局示意图见视觉效果

通过@media媒体查询实现。
ie8下做兼容处理

## 还需要解决的问题
[x]slider组件完善：继承和派生，拖拽问题
[x]热门课程推荐轮播组件的鼠标滚轮事件
[x]video自定义控件的事件
[x]测试及性能优化
[x]打包

## 更新日志
### 2016.6.22
* ie兼容性测试
* 增加readme.md，mark课程具体实现及需要解决的问题


